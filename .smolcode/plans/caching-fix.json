{
  "id": "caching-fix",
  "steps": [
    {
      "id": "read-agent-go",
      "description": "Read and understand agent.go, focusing on the caching mechanism.",
      "status": "DONE",
      "acceptance": [
        "Identify current cache creation logic.",
        "Identify current cache usage logic."
      ]
    },
    {
      "id": "identify-double-send",
      "description": "Pinpoint where conversation history might be sent twice.",
      "status": "DONE",
      "acceptance": [
        "Confirm if and where the full history is sent despite caching."
      ]
    },
    {
      "id": "design-solution",
      "description": "Design the solution to avoid sending redundant conversation history.",
      "status": "DONE",
      "acceptance": [
        "Define new struct field for cached history count.",
        "Outline changes to cache creation to store the count.",
        "Outline changes to content generation to use the count."
      ]
    },
    {
      "id": "implement-solution",
      "description": "Modify agent.go to implement the designed solution.",
      "status": "TODO",
      "acceptance": [
        "Successfully add new field to agent struct.",
        "Successfully update cache creation logic.",
        "Successfully update content generation logic."
      ]
    },
    {
      "id": "create-checkpoint",
      "description": "Create a checkpoint with the changes.",
      "status": "TODO",
      "acceptance": [
        "All previous steps are DONE."
      ]
    }
  ]
}